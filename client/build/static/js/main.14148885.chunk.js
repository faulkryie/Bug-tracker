(this["webpackJsonpbug-tracker-frontend"]=this["webpackJsonpbug-tracker-frontend"]||[]).push([[0],{27:function(e,t,n){e.exports=n(41)},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),l=n.n(c),o=(n(32),n(22)),u=n(3),i=n(10),s=n(1),m=n.n(s),p=n(4),E=n(5),d=n(16),f=n.n(d),b=function(e){return{type:"LOAD_EMPLOYEES",employees:e}},v=function(e){return{type:"REMOVE_ONE_EMPLOYEE",employeeId:e}},h=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users");case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,r=a.employees,n.ok){e.next=10;break}throw n;case 10:t(b(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){return{type:"LOAD_PROJECTS",projects:e}},y=function(e){return{type:"ADD_PROJECT",project:e}},j=function(e,t){return{type:"LOAD_SESSION",user:e,token:t}},k=function(e,t){return function(){var n=Object(p.a)(m.a.mark((function n(a){var r,c,l,o,u;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={email:e,password:t},n.prev=1,n.next=4,fetch("/api/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:return c=n.sent,l=f.a.get("token"),n.next=8,c.json();case 8:o=n.sent,u=o.employee,a(j(u,l)),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},g=function(e,t,n){return function(){var a=Object(p.a)(m.a.mark((function a(r){var c,l,o,u,i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={name:e,email:t,password:n},a.prev=1,a.next=4,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:return l=a.sent,o=f.a.get("token"),a.next=8,l.json();case 8:u=a.sent,i=u.employee,r(j(i,o)),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()},S=n(2),w=function(){var e=Object(S.b)(),t=Object(a.useState)("demo1@example.com"),n=Object(E.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)("password1"),u=Object(E.a)(o,2),i=u[0],s=u[1],d=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(k(c,i));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:d},r.a.createElement("h2",null,"login here"),r.a.createElement("input",{onChange:function(e){return l(e.target.value)},name:"email",type:"email",value:c,required:!0}),r.a.createElement("input",{onChange:function(e){return s(e.target.value)},name:"password",type:"password",value:i,required:!0}),r.a.createElement("button",{type:"submit"},"Submit")))},x=function(e){var t=e.employeesArray,n=Object(S.b)(),a=function(e){var t;window.confirm("Are you sure you wish to delete this item?")&&n((t=e.target.id,function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t,10),e.prev=1,e.next=4,fetch("/api/users/".concat(a),{method:"DELETE"});case 4:if((r=e.sent).ok){e.next=7;break}throw r;case 7:n(v(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Employee"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,function(e){switch(e){case 1:return"admin";case 2:return"project manager";case 3:return"dev";case 4:return"submitter";default:return null}}(e.roleId)),r.a.createElement("td",null,r.a.createElement("button",{id:e.id,onClick:a},"Delete")))}))))},_=function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.employees})),n=Object(a.useState)(""),c=Object(E.a)(n,2),l=c[0],o=c[1],u=Object(a.useState)(""),i=Object(E.a)(u,2),s=i[0],d=i[1],f=Object.values(t);Object(a.useEffect)((function(){e(h())}),[e]);return f.length>0?r.a.createElement("div",null,r.a.createElement("h1",null,"employee component"),r.a.createElement(x,{employeesArray:f}),r.a.createElement("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=l,a=s,function(){var e=Object(p.a)(m.a.mark((function e(t){var r,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(n,10),e.prev=1,c={roleId:a},e.next=5,fetch("/api/users/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:if((l=e.sent).ok){e.next=8;break}throw l;case 8:t(h()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("label",{htmlFor:"employee"},"Edit Employee Roles: "),r.a.createElement("select",{onChange:function(e){o(e.target.value)},id:"employee",name:"employee",value:l,required:!0},r.a.createElement("option",{value:"",key:-1},"Select Employee"),f.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("select",{onChange:function(e){d(e.target.value)},id:"roles",name:"roles",value:s,required:!0},r.a.createElement("option",{value:"",key:-1},"Select Role"),r.a.createElement("option",{value:0,key:0},"no role"),r.a.createElement("option",{value:1,key:1},"admin"),r.a.createElement("option",{value:2,key:2},"project manager"),r.a.createElement("option",{value:3,key:3},"dev"),r.a.createElement("option",{value:4,key:4},"submitter")),r.a.createElement("button",{type:"submit"},"Submit"))):r.a.createElement("h2",null,"no employees available")},C=function(){var e=Object(S.b)(),t=Object(a.useState)(""),n=Object(E.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),u=Object(E.a)(o,2),i=u[0],s=u[1],d=Object(a.useState)(""),f=Object(E.a)(d,2),b=f[0],v=f[1],h=Object(S.c)((function(e){return e.employees})),O=Object.values(h);return r.a.createElement("div",null,r.a.createElement("h1",null,"project form"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t,n){return function(){var a=Object(p.a)(m.a.mark((function a(r){var c,l,o,u;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={name:e,description:t,employeeIdArray:[n]},a.prev=2,a.next=5,fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:if((l=a.sent).ok){a.next=8;break}throw l;case 8:return a.next=10,l.json();case 10:o=a.sent,u=o.project,console.log("inside getprojects thunks",u),r(y(u)),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(2),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[2,16]])})));return function(e){return a.apply(this,arguments)}}()}(c,i,b))}},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{onChange:function(e){return l(e.target.value)},name:"name",id:"name",value:c}),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{onChange:function(e){return s(e.target.value)},name:"description",id:"description",value:i}),r.a.createElement("label",{htmlFor:"employee"},"Add Employee: "),r.a.createElement("select",{onChange:function(e){v(e.target.value)},id:"employee",name:"employee",value:b},r.a.createElement("option",{value:"",key:-1},"Select Employee"),O.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("button",{type:"submit"},"Add")))},D=function(e){var t=e.projectsArray;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Project"),r.a.createElement("th",null,"description"),r.a.createElement("th",null,"assigned employees"),r.a.createElement("th",null,"comments"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.Employees?e.Employees.map((function(e){return r.a.createElement("li",{key:e.id},e.name)})):""),r.a.createElement("td",null,e.comments?e.comments.map((function(e){var t=e.split("__"),n=Object(E.a)(t,2),a=n[0],c=n[1],l=parseInt(a,10);return r.a.createElement("li",{key:l},c)})):r.a.createElement("h3",null,"no comments")),r.a.createElement("td",null,r.a.createElement("button",{id:e.id},"Delete")))}))))},T=(n(38),function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.projects})),n=Object.values(t),c=Object(a.useState)(!0),l=Object(E.a)(c,2),o=l[0],u=l[1];Object(a.useEffect)((function(){e(function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/projects");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=a.projects,console.log("inside getprojects thunks",r),t(O(r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);return n.length>0?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){u(!o)}},"add project"),r.a.createElement("div",{className:o?"hidden":""},r.a.createElement(C,null)),r.a.createElement("h1",null,"Project component"),r.a.createElement(D,{projectsArray:n})):r.a.createElement("h2",null,"no projects found")}),P=function(){var e=Object(S.c)((function(e){return e.tickets})),t=Object.values(e);return r.a.createElement("div",null,r.a.createElement("h1",null,"Ticket Component"),t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.severityLevel),r.a.createElement("td",null,e.status),r.a.createElement("td",null,e.type),r.a.createElement("td",null,r.a.createElement("button",{id:e.id},"Delete")))})))},L=function(){var e=Object(S.b)(),t=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(e){f.a.remove("token"),e({type:"REMOVE_SESSION"}),e({type:"REMOVE_EMPLOYEES"}),e({type:"REMOVE_PROJECTS"})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("button",{onClick:t,type:"submit"},"Logout"))},N=(n(39),function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"admin dashboard"),r.a.createElement("nav",null,r.a.createElement(L,null)),r.a.createElement("div",{className:"employee-container"},r.a.createElement(_,null)),r.a.createElement("div",{className:"employee-container"},r.a.createElement(T,null)),r.a.createElement("div",{className:"employee-container"},r.a.createElement(P,null)))}),R=function(){var e=Object(S.b)(),t=Object(a.useState)(""),n=Object(E.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),u=Object(E.a)(o,2),i=u[0],s=u[1],d=Object(a.useState)(""),f=Object(E.a)(d,2),b=f[0],v=f[1],h=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(g(c,i,b));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:h},r.a.createElement("h2",null,"Sign Up here"),r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{id:"name",onChange:function(e){return l(e.target.value)},name:"name",type:"name",value:c,required:!0}),r.a.createElement("label",{htmlFor:"email"},"Email: "),r.a.createElement("input",{id:"email",onChange:function(e){return s(e.target.value)},name:"email",type:"email",value:i,required:!0}),r.a.createElement("label",{htmlFor:"password"},"password: "),r.a.createElement("input",{id:"password",onChange:function(e){return v(e.target.value)},name:"password",type:"password",value:b,required:!0}),r.a.createElement("button",{type:"submit"},"Sign Up")))},A=function(e){var t=e.component,n=e.token,a=Object(o.a)(e,["component","token"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}}))},I=function(e){var t=e.component,n=e.token,a=Object(o.a)(e,["component","token"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(u.a,{to:"/admin/dashboard"}):r.a.createElement(t,e)}}))};function M(e){var t=e.token;return r.a.createElement("div",null,r.a.createElement("h1",null,"Trackerfy"),r.a.createElement("nav",null,r.a.createElement(i.b,{to:"/login"},"Login"),r.a.createElement(i.b,{to:"/signup"},"Sign Up"),r.a.createElement(i.b,{to:"/admin/dashboard"},"Dashboard")),r.a.createElement(u.d,null,r.a.createElement(A,{token:t,exact:!0,path:"/admin/dashboard",component:N}),r.a.createElement(I,{exact:!0,token:t,path:"/login",component:w}),r.a.createElement(I,{token:t,path:"/signup",component:R})))}var J=function(){var e=Object(S.c)((function(e){return e.session.authToken}));return r.a.createElement(M,{token:e})},V=n(8),q=n(26),F=n(14),U=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_EMPLOYEES":return e={},n.employees.map((function(t){return e[t.id]=t})),e;case"REMOVE_EMPLOYEES":return{};case"REMOVE_ONE_EMPLOYEE":return delete(e=Object.assign({},Object(F.a)({},t)))[n.employeeId],e;default:return t}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SESSION":return Object.assign({},{currentUserId:t.user.id,role:t.user.roleId,authToken:t.token});case"REMOVE_SESSION":return{};default:return e}},X=n(15),B=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_PROJECTS":return e={},n.projects.map((function(t){return e[t.id]=t})),e;case"ADD_PROJECT":return e=Object(F.a)({},t,Object(X.a)({},n.project.id,n.project));case"REMOVE_PROJECTS":return{};default:return t}},K=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOAD_TICKETS":return e={},n.tickets.map((function(t){return e[t.id]=t})),e;default:return t}},z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,G=Object(V.c)({employees:U,projects:B,tickets:K,session:Y}),H=z(Object(V.a)(q.a)),Q=function(e){return Object(V.e)(G,e,H)}();l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(S.a,{store:Q},r.a.createElement(J,null)))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.14148885.chunk.js.map